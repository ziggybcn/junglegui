# Msg #

The Control base class has a Method called Msg that is part of the internal core functinonality of this Gui library.

This Method is internally used by the library to handle low level status changes. This changes can lateron be converted to Events.

This is the Msg method signature:

```
Method Msg(msg:BoxedMsg)```

Where the BoxedMsg is a class that contains the message information:

```
Class BoxedMsg;
Field e:EventArgs;
Field sender:Object
Field status:int
End```

In this class, sender is the control instance that is causing the status change or event. "e" is the event signature data, that identifies the event as a CLICK event, a RESIZE event, etc.

When a Control "Msg" method is invoked, this control populates this Msg call to its parent. That is, messages are spread from the control that gets them in the first place, to the latest control in the parent/child chain.

As instance, when a user gives the focus to a Button, the Gui system will notify the button with this call (more or less):
```

Local event:=New EventArgs(eMsgKinds.MOUSE_ENTER)
Local msg:= New BoxedMsg(sender, event)
sender.Msg(msg)
```

That is, the button is notified that the mouse is now over it.

When that happens, the button will inform its parent that it is now under the mouse. Then, its parent will notify its parent... and all this ad-infinitum untl the TopLevelControl is found, that is, until the message reaches the final "Form" or "Window".

# TopLevelControl Msg #

TopLevelControl Msg system behaves a bit different. When a TopLevelControl gets a Msg that means that something is being notified. Something has happened, a button has been clicked, the Form has been moved, anything... Then, in this situation, a TopLevelControl, instead of populating the Msg to its parent (TopLevelControls DO NOT HAVE parents) what they do is simply end the Msg chain, allowing the original Control to check wheter the Msg has been canceled or not, and, if te Msg has not been canceled, the Control will call its internal Dispatch method in order to convert the Msg to an Event that can then be used in the high level usage of the Gui system.

This is a sample flow-chart that explains how a Msg is sent on cascade from a Control to the whole parents chain of it.

![http://wiki.junglegui.googlecode.com/hg/images/Dibujo1.png](http://wiki.junglegui.googlecode.com/hg/images/Dibujo1.png)

# Msg encapsulation #
This Msg design provides built-in encapsulation of events from container controls. This is a wonderful feature that allows the creation of complex controls and the usage of them as a single unit.

A complex control that contains other controls can handle all Msg generated by their child controls and hide them to the parent form by breacking the Msg chain deliverately. This container could also react to them in the control code so the final user does not have to recode anything, or even populate this messages on a modified form.

We could create a control that extends ControlContainer and contains a label with a text, and an TextField (typical combination of text + field for login forms).This control could handle itself any click/focus Msg of their child components, and expose them to its parent as a single unit. As an example, the TEXT\_MODIFIED Msg of the contained TextField, could be populated to the control parent, BUT setting our newly creater container as the Msg sender.

All in all, this system allows the usage of Msg in a very self-contained, secure and easy to extend and maintain way.